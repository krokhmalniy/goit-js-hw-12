{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  if (!gallery) return;\n  \n  const insertion = images\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n       <figure class=\"gallery-figure\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n   <figcaption class=\"gallery-info\">\n      <ul class=\"gallery-stats\">\n        <li class='stats-item'><span class='social-info'>Likes</span> <span>${image.likes}</span> </li>\n        <li class='stats-item'><span class='social-info'>Views</span> <span>${image.views}</span></li>\n        <li class='stats-item'><span class='social-info'>Comments</span> <span>${image.comments}</span></li>\n        <li class='stats-item'><span class='social-info'>Downloads</span> <span>${image.downloads}</span></li>\n      </ul>\n    </figcaption>\n   </figure>\n</li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', insertion);\n  lightbox.refresh();  \n}  \n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  if (!gallery) return;\n  gallery.innerHTML = '';\n  lightbox.refresh();\n}\n\n\nexport function showLoader() {\n  const load = document.querySelector('.loader');\n  load.hidden = false;\n  load.classList.add('load');\n}\n\nexport function hideLoader() {\n  const load = document.querySelector('.loader');\n  load.hidden = true;\n  load.classList.remove('load');\n}\n\nexport function showLoadMoreButton() {\n  const loadButton = document.querySelector('.load-button');\n  loadButton.hidden = false;\n}\n\nexport function hideLoadMoreButton() {\n  const loadButton = document.querySelector('.load-button');\n  loadButton.hidden = true;\n}","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '52758797-16c779dc2baa00e6d4d028fc2';\nexport const per_page = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n  const paramsOfSearch = {\n    key: API_KEY,\n    q: query,\n    page,\n    per_page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const response = await axios.get(`${BASE_URL}`, {\n    params: paramsOfSearch,\n  });\n  return response;\n}","export default \"data:image/svg+xml,%3c!--%20Generated%20by%20IcoMoon.io%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fafafb'%20d='M9.080%200.292c0.187-0.187%200.441-0.292%200.706-0.292h12.428c0.265%200%200.519%200.105%200.706%200.292l8.788%208.788c0.187%200.187%200.292%200.441%200.292%200.706v12.428c0%200.265-0.105%200.519-0.292%200.706l-8.788%208.788c-0.187%200.187-0.441%200.292-0.706%200.292h-12.428c-0.265%200-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265%200.105-0.519%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fafafb'%20d='M9.292%209.292c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.132%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217l5.292%205.294%205.292-5.294c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.131%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325l-5.294%205.292%205.294%205.292c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325s-0.203%200.167-0.325%200.217c-0.121%200.050-0.252%200.076-0.383%200.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292%205.294c-0.093%200.093-0.203%200.167-0.325%200.217s-0.252%200.076-0.383%200.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262%200.076-0.383c0.050-0.121%200.124-0.232%200.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132%200.026-0.262%200.076-0.383s0.124-0.232%200.217-0.325z'%3e%3c/path%3e%3c/svg%3e\"","import {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\nimport { getImagesByQuery, per_page } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconOctagon from '../src/img/bi_x-octagon.svg';\n\nconst container = document.querySelector('.container');\nconst formSearch = document.querySelector('.form');\nconst formText = document.querySelector('.form-text');\nconst submitButton = document.querySelector('.submit-button');\nconst loadButton = document.querySelector('.load-button');\nlet formTextValue = formText.value.trim().toLowerCase();\nlet defaultPage = 1;\nlet totalPages;\nlet heightStatsItem;\n\nformSearch.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  formTextValue = formText.value.trim().toLowerCase();\n  if (!formTextValue) {\n    return iziToast.info({\n      message: 'Please enter the query parameters',\n      messageColor: '#FAFAFB',\n      closeOnEscape: true,\n    });\n  }\n\n  submitButton.disabled = true;\n  hideLoadMoreButton();\n  showLoader();\n  clearGallery();\n  defaultPage = 1;\n\n  try {\n    const response = await getImagesByQuery(formTextValue);\n    if (response.data.hits.length === 0) {\n      return iziToast.warning({\n        backgroundColor: '#EF4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n        iconUrl: iconOctagon,\n        closeOnEscape: true,\n      });\n    }\n    createGallery(response.data.hits);\n    totalPages = Math.ceil(response.data.totalHits / per_page);\n    if (defaultPage < totalPages) {\n      showLoadMoreButton();\n      const galleryItem = document.querySelector('.gallery-item');\n      heightStatsItem = galleryItem.getBoundingClientRect().height;\n    } else {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `${error}`,\n      closeOnEscape: true,\n    });\n  } finally {\n    hideLoader();\n    submitButton.disabled = false;\n  }\n});\n\nloadButton.addEventListener('click', async event => {\n  event.preventDefault();\n  hideLoadMoreButton();\n  showLoader();\n\n  defaultPage++;\n  try {\n    const response = await getImagesByQuery(formTextValue, defaultPage);\n    createGallery(response.data.hits);\n  } catch (error) {\n    iziToast.error({\n      message: `${error}`,\n      closeOnEscape: true,\n    });\n  } finally {\n    hideLoader();\n    window.scrollBy({\n      top: heightStatsItem * 2,\n      behavior: 'smooth',\n    });\n    if (defaultPage >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        closeOnEscape: true,\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  }\n});\n"],"names":["lightbox","SimpleLightbox","createGallery","images","gallery","insertion","image","clearGallery","showLoader","load","hideLoader","showLoadMoreButton","loadButton","hideLoadMoreButton","BASE_URL","API_KEY","per_page","getImagesByQuery","query","page","paramsOfSearch","axios","iconOctagon","formSearch","formText","submitButton","formTextValue","defaultPage","totalPages","heightStatsItem","event","iziToast","response","error"],"mappings":"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"}